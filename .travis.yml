language: csharp
sudo: required
dist: trusty
mono: latest
# dotnet: 2.0.3
os:
- linux
git:
  depth: 1
cache:
  directories:
  - tools
  - "$HOME/.nuget/packages"
before_cache:
- rm -f tools/packages.config
before_script:
- curl https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg
- sudo mv microsoft.gpg /etc/apt/trusted.gpg.d/microsoft.gpg
- sudo sh -c 'echo "deb [arch=amd64] https://packages.microsoft.com/repos/microsoft-ubuntu-trusty-prod trusty main" > /etc/apt/sources.list.d/dotnetdev.list'
- sudo apt-get update
- sudo apt-get install dotnet-sdk-2.1.300
script:
- git fetch --unshallow
- git fetch origin '+refs/heads/*:refs/heads/*'
- git branch -r
- chmod 755 ./build.sh
- "./build.sh --verbosity Diagnostic"
